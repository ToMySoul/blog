---
title: 传输协议
date: 2023-04-06 14:46:13
categories:
tags:
---
## 传输协议

### HTTP

1. 超文本传输协议
2. 基于TCP/IP通信协议传递数据（HTML文件，图片文件，查询结果等）。
3. 客户端发送请求，服务端回送响应

#### 工作流程

1. 客户机与服务器建立TCP连接，点击某个超级链接/输入网址/提交表单等

2. 建立连接后，客户机发送http请求给服务器
3. 服务器接到请求后，响应信息
4. 客户端接收服务器所返回的信息，然后客户机与服务器断开TCP连接

#### 特点

1. 简单快速

客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET,HEAD,POST。小简单所以通信快。

##### GET 

##### POST

疑问：为啥小，简单

2. 灵活

HTTP允许传输任意类型的数据对象，正在传输的类型由Content-Type 加以标记。

疑问：任意对象有哪些，Content-Type ？

3. 无连接

无连接指限制每次连接只处理一个请求，服务器处理完客户的请求，收到应答后，即断开连接，节省传输时间。

#### HTTP其他相关知识补充



 2.1 HTTP协议与TCP/IP协议的关系

HTTP的长连接和短连接本质是TCP的长连接和短连接，HTTP属于应用层协议，在传输层使用TCP协议，在网络层使用IP协议。IP协议: 解决网络路由和寻址问题;

TCP协议：主要解决如何在IP层之上可靠的传递数据包，使在网络上的另一端收到发端发送的所有包，并且顺序与发出顺序一致。

TCP 可靠面向连接

2.2 HTTP协议无状态的

指协议对于事务的处理没有记忆，服务端不知道客户端的状态，打个服务器上的页面和之前打开和这个服务器上的页面之间没有任何联系，HTTP是一个无状态的面向连接的协议，无状态不代表HTTP不能保持TCP连接，更不能代表HTTP使用UDP协议（无连接）。

2.3 什么是长连接，短连接？

HTTP/1.0 默认短连接。浏览器和服务器每进行一次HTTP操作，就建立一次连接，但任务结束就中断连接。如果客户端浏览器访问的某个HTML或其他类型的Web页中包含其他web 文件 图像，css 文件等；当浏览器每遇到这样的一个Web资源，就会建立一个HTTP会话。

疑问：打开其他web 是指其他页面资源？

HTTP/1.1 默认长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头有加配置代码Connection:keep-alive；在使用长连接的情况下，一个网页打开完成后，客户端与服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器上的网页，会继续使用这条已经建立的连接，keep-alive不会永久保持连接，它有保持时间，可以在不同的服务器软件中设定时间（列Apache）。

HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接。

### TCP（简单了解）

双全工，两边都需要关闭

1. TCP传输控制协议是一种面向连接的、可靠的、基于IP的传输层协议

### 知识延伸：（ 网络七层模型，IP）

#### 三次握手，四次挥手

https://www.jianshu.com/p/fa07ebbbd393

三次握手（建立连接）

1. 第一次握手：客户端告诉服务端我需要发送数据；
2.  第二次握手：服务端收到消息并告诉客户端我收到了
3. 第三次握手：客户端表示，我知道了。

数据开始传输

四次挥手（断开连接）

1. 第一次挥手：客户端告诉服务器我数据传输完了
2. 第二次挥手：服务器告诉客户端等我数据接收完
3. 第三次挥手：服务器告诉客户端我数据接收完了，可以关闭了
4. 第四次挥手：客户端回复客户端表示收到了。



### HTTPS

超文本传输安全协议；在应用层和传输层多了安全协议的HTTP协议，安全协议是SSL 或TSL

HTTP通信是明文传输，易被窃听、篡改、冒充

HTTPS 加密、签名、数字证书